<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">
  <head th:fragment="styles">
    <title layout:title-pattern="$DECORATOR_TITLE - $CONTENT_TITLE"></title>

	<link href="../static/vendor/fontawesome/css/font-awesome.min.css"
          th:href="@{/vendor/fontawesome/css/font-awesome.min.css}" rel="stylesheet"></link>
           
     <link href="../static/vendor/simple-line-icons/css/simple-line-icons.css"
          th:href="@{/vendor/simple-line-icons/css/simple-line-icons.css}" rel="stylesheet"/>
          
     <link href="../static/vendor/animate.css/animate.min.css"
          th:href="@{/vendor/animate.css/animate.min.css}" rel="stylesheet"/>

     <link href="../static/vendor/weather-icons/css/weather-icons.min.css"
          th:href="@{/vendor/weather-icons/css/weather-icons.min.css}" rel="stylesheet"/>
          
     <link href="../static/vendor/whirl/dist/whirl.css"
          th:href="@{/vendor/whirl/dist/whirl.css}" rel="stylesheet"/>
   
      
   
     <link href="../static/vendor/bootstrap-tagsinput/dist/bootstrap-tagsinput.css"
          th:href="@{/vendor/bootstrap-tagsinput/dist/bootstrap-tagsinput.css}" rel="stylesheet"/>


     <link href="../static/vendor/fullscreenoverlay/css/style5.css"
          th:href="@{/vendor/fullscreenoverlay/css/style5.css}" rel="stylesheet"/>

     <link href="../static/vendor/x-editable/dist/bootstrap3-editable/css/bootstrap-editable.css"
          th:href="@{/vendor/x-editable/dist/bootstrap3-editable/css/bootstrap-editable.css}" rel="stylesheet"/>
   
     <link href="../static/vendor/eonasdan-bootstrap-datetimepicker/build/css/bootstrap-datetimepicker.min.css"
          th:href="@{/vendor/eonasdan-bootstrap-datetimepicker/build/css/bootstrap-datetimepicker.min.css}" rel="stylesheet"/>
                 
    
     <link href="../static/vendor/bootstrap-social/bootstrap-social.css"
          th:href="@{/vendor/bootstrap-social/bootstrap-social.css}" rel="stylesheet"/>

     <link href="../static/vendor/bootstrap/dist/css/bootstrap.css"
          th:href="@{/vendor/bootstrap/dist/css/bootstrap.css}" rel="stylesheet"/>


     <link href="../static/vendor/bootstrap-slider/dist/css/bootstrap-slider.min.css"
          th:href="@{/vendor/bootstrap-slider/dist/css/bootstrap-slider.min.css}" rel="stylesheet"/>
          
     <link href="../static/vendor/formvalidation-io/dist/css/formValidation.min.css" th:href="@{/vendor/formvalidation-io/dist/css/formValidation.min.css}" rel="stylesheet"/>


     <link href="../static/vendor/video-js/dist/video-js.css" th:href="@{/vendor/video-js/dist/video-js.css}" rel="stylesheet"/>


     <link href="../static/vendor/royalslider/royalslider.css"
          th:href="@{/vendor/royalslider/royalslider.css}" rel="stylesheet" />

     <link href="../static/vendor/royalslider/rs-default.css"
          th:href="@{/vendor/royalslider/rs-default.css}" rel="stylesheet" />
          

     <link href="../static/vendor/jqcloud/dist/jqcloud.min.css"
          th:href="@{/vendor/jqcloud/dist/jqcloud.min.css}" rel="stylesheet" />
          

 <link href="../static/vendor/youtube-playlist-player/youtube-video-player.min.css"
          th:href="@{/vendor/youtube-playlist-player/youtube-video-player.min.css}" rel="stylesheet" />
	          
     
      <link href="../static/css/main.css"
          th:href="@{/css/main.css}" rel="stylesheet"/> 

          
           
     <link href="../static/css/app.css"
          th:href="@{/css/app.css}" rel="stylesheet" />
            
     <link href="../static/css/theme-d.css"
          th:href="@{/css/theme-d.css}" rel="stylesheet" />      
           
   </head>

   
   <div th:fragment="scripts">
   

   
   
   
      <!-- MODERNIZR-->
    <script src="../static/vendor/modernizr/modernizr.js"
            th:src="@{/vendor/modernizr/modernizr.js}"></script>   
            
<!--     <script src="../static/vendor/jquery/dist/jquery.js"
            th:src="@{/vendor/jquery/dist/jquery.js}"></script>   
 -->
 
 
    <script src="../static/vendor/jquery-ui-1_11_4/jquery-ui.min.js"
            th:src="@{/vendor/jquery-ui-1_11_4/jquery-ui.min.js}"></script>   
                        


 	<!-- FULLSCREEN OVERLAY -->
    <script src="../static/vendor/fullscreenoverlay/js/classie.js"
            th:src="@{/vendor/fullscreenoverlay/js/classie.js}"></script>   
    
    <!-- FULLSCREEN OVERLAY -->
    <script src="../static/vendor/fullscreenoverlay/js/overlay.js"
            th:src="@{/vendor/fullscreenoverlay/js/overlay.js}"></script>   
    
    

    <script src="../static/vendor/bootstrap/dist/js/bootstrap.js"
            th:src="@{/vendor/bootstrap/dist/js/bootstrap.js}"></script>   

    <script src="../static/vendor/parsleyjs/dist/parsley.min.js"
            th:src="@{/vendor/parsleyjs/dist/parsley.min.js}"></script>   

   
  
   
    <!-- STORAGE API-->
    <script src="../static/vendor/jQuery-Storage-API/jquery.storageapi.js"
            th:src="@{/vendor/jQuery-Storage-API/jquery.storageapi.js}"></script>  

    <script src="../static/vendor/jquery.easing/js/jquery.easing.js"
            th:src="@{/vendor/jquery.easing/js/jquery.easing.js}"></script>   

    <script src="../static/vendor/animo.js/animo.js"
            th:src="@{/vendor/animo.js/animo.js}"></script>   

    <script src="../static/vendor/slimScroll/jquery.slimscroll.min.js"
            th:src="@{/vendor/slimScroll/jquery.slimscroll.min.js}"></script>   

    <script src="../static/vendor/screenfull/dist/screenfull.js"
            th:src="@{/vendor/screenfull/dist/screenfull.js}"></script>   
<!-- 
    <script src="../static/vendor/jquery-validation/dist/jquery.validate.js"
            th:src="@{/vendor/jquery-validation/dist/jquery.validate.js}"></script>   

    <script src="../static/vendor/jquery.steps/build/jquery.steps.js"
            th:src="@{/vendor/jquery.steps/build/jquery.steps.js}"></script>   

    <script src="../static/js/user-settings-index-wizard.js"
            th:src="@{/js/user-settings-index-wizard.js}"></script>    -->


   <!-- MOMENT JS-->
    <script src="../static/vendor/moment/min/moment-with-locales.min.js"
            th:src="@{/vendor/moment/min/moment-with-locales.min.js}"></script>


   <!-- XEDITABLE-->
    <script src="../static/vendor/x-editable/dist/bootstrap3-editable/js/bootstrap-editable.min.js"
            th:src="@{/vendor/x-editable/dist/bootstrap3-editable/js/bootstrap-editable.min.js}"></script>   

    <script src="../static/vendor/bootstrap-tagsinput/dist/bootstrap-tagsinput.min.js"
            th:src="@{/vendor/bootstrap-tagsinput/dist/bootstrap-tagsinput.min.js}"></script>   
      
    <script src="../static/vendor/bootstrap-slider/dist/bootstrap-slider.min.js"
            th:src="@{/vendor/bootstrap-slider/dist/bootstrap-slider.min.js}"></script>   

    <script src="../static/vendor/eonasdan-bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js"
            th:src="@{/vendor/eonasdan-bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js}"></script>  

    
   <script th:src="@{/vendor/umbg-video-player/umbg/jquery.umbg.js}" src="../static/vendor/umbg-video-player/umbg/jquery.umbg.js"></script>

    <script src="../static/vendor/formvalidation-io/dist/js/formValidation.js" th:src="@{/vendor/formvalidation-io/dist/js/formValidation.js}"></script>   
    <script src="../static/vendor/formvalidation-io/dist/js/framework/bootstrap.js" th:src="@{/vendor/formvalidation-io/dist/js/framework/bootstrap.js}"></script>   

    <script src="../static/vendor/animatedmodal/animatedModal.min.js" th:src="@{/vendor/animatedmodal/animatedModal.min.js}"></script>   
	
	<script src="../static/vendor/video-js/dist/video.js" th:src="@{/vendor/video-js/dist/video.js}"></script>
	   
	<script src="../static/vendor/jqcloud/dist/jqcloud.min.js" th:src="@{/vendor/jqcloud/dist/jqcloud.min.js}"></script> 
	<script src="../static/vendor/jquery-bar-rating/dist/jquery.barrating.min.js" th:src="@{/vendor/jquery-bar-rating/dist/jquery.barrating.min.js}"></script> 
	
		<script src="../static/vendor/sweetalert2/dist/sweetalert2.min.js" th:src="@{/vendor/sweetalert2/dist/sweetalert2.min.js}"></script>   


           
	<script src="../static/js/app.js"  th:src="@{/js/app.js}"></script> 
	<script src="../static/js/main.js" th:inline="javascript" th:src="@{/js/main.js}"></script> 
	<script src="../static/js/mobile.js" th:inline="javascript" th:src="@{/js/mobile.js}"></script> 
	 
	<script src="../static/js/social-share.js"  th:src="@{/js/social-share.js}"></script> 	
	<script src="../static/js/rating-video.js"  th:src="@{/js/rating-video.js}"></script> 	

	


<!-- INITIALIZATION OF JAVASCRIPT GLOBAL ARIABLES -->	
<script th:inline="javascript">
			/*<![CDATA[*/
			$(document).ready(function() {
			

				
					/**********************  GLOBAL VARIABLES ********************************/	 
					
					//VARIABLES
					terrabisApp.tablet = [[${device!=null ? device.tablet : false}]];
					terrabisApp.normal = [[${device!=null ? device.normal : true}]];
					terrabisApp.mobile = [[${device!=null ? device.mobile : false}]];
					terrabisApp.csrf_token = [[${_csrf.token}]];
					terrabisApp.googleMapType = [[${PERS.googleMapType}]];

					
					
					terrabisApp.pageView = [[${execInfo.templateName}]];
					terrabisApp.isAuthenticated = [[${(#authorization.expression('isAuthenticated()'))}]];

					
					
					if(([[${(#authorization.expression('isAuthenticated()'))}]])) {
					 		//initUploadDropzone();
					 		//FOR QUICK UPLOAD MODAL
							terrabisApp.successRedirectURI = [[@{'/upload/upload-success'}]]; 
							terrabisApp.uploadFileURL = [[@{'/upload/video-submit/file'}]];
							terrabisApp.uploadLinkURL = [[@{'/upload/video-submit/link'}]];
							
							
					 };

					//VALIDATION
					terrabisApp.validateRateDuplicateURI = [[@{'/rest-validation/video/duplicate/rating'}]];
					terrabisApp.validateDuplicateYoutubeURI = [[@{'/rest-validation/video/duplicate/youtube'}]];

					
					
					
				    
					//PERSONALIZATION URI
					terrabisApp.PERSGoogleMapTypeURI = [[@{'/rest-personalization/google-map/type'}]];
					terrabisApp.PERSAdvertShownURI = [[@{'/rest-personalization/google-map/advert-shown'}]];
					terrabisApp.PERSGoogleMapClusterModeURI = [[@{'/rest-personalization/google-map/clusterer-mode'}]];
					terrabisApp.PERSGoogleMapShowSearchMapFieldURI = [[@{'/rest-personalization/google-map/search-map-field'}]];
					
					
					
					
					
					 
			
					//URLS
				    terrabisApp.addToWatchLaterURI = [[@{'/rest/collections/watch-later/add/'}]];
				    terrabisApp.addToFavoritesURI = [[@{'/rest/collections/favorites/add/'}]];
				    terrabisApp.countVideoPlayURI = [[@{'/rest/video/play/'}]];
				    terrabisApp.countVideoLikeURI = [[@{'/rest/video/like/'}]];
				    terrabisApp.rateVideoURI = [[@{'/rest/video/rate/'}]];
				    terrabisApp.shareVideoURI = [[@{'/rest/video/share/'}]];
				    terrabisApp.reviewVideoURI = [[@{'/rest/video/review/'}]];
				    terrabisApp.reviewDeleteVideoURI = [[@{'/rest/video/review/delete'}]];
				    terrabisApp.followUserURI = [[@{'/rest/user/follow'}]];
				    terrabisApp.unFollowUserURI = [[@{'/rest/user/unfollow'}]];
				    
				    
				    
				    
					
				    //TAGS URI
					terrabisApp.fetchTagsURI = [[@{'/rest-data-fetch/tags'}]];
					
					
					//UPLOAD PAGE URLS
					terrabisApp.uploadFileURL = [[@{'/upload/video-submit/file'}]];
					terrabisApp.uploadLinkURL = [[@{'/upload/video-submit/link'}]];
					terrabisApp.uploadIndexURI = [[@{'/upload/video/'}]];
					terrabisApp.successRedirectURI = [[@{'/upload/upload-success'}]] 					
					
					
					//GOGLE MARKER URLS
					terrabisApp.googleMarkerCenterMapImgURL = [[@{'/images/markers-list/map-marker-selected-normal.png'}]];
					terrabisApp.googleMarkerImgDynamicURL = [[@{'/images/markers-list/marker-'}]];
					terrabisApp.googleMarkerPromoteURL = [[@{'/images/markers-list/marker-promote.png'}]];				
					
					
					//DATA FETCH
					terrabisApp.paginatorVideoCatalogURI = [[@{'/rest/paginator/video-catalog/'}]];
					terrabisApp.paginatorUserVideoCatalogURI = [[@{'/rest/paginator/user/video-catalog/'}]];
					terrabisApp.paginatorViewportCatalogURI = [[@{'/rest/paginator/viewport-catalog/'}]];
					

					
					terrabisApp.viewportCatalogURI = [[@{'/rest/viewport-catalog/'}]];
					
					//VIDEO ONE
					terrabisApp.videoOneViewURI = [[@{'/video/'}]];
					//CLAIM
					terrabisApp.videoClaimURI = [[@{'/video/claim/request/'}]];
					//MAP
					terrabisApp.mapURI = [[@{'/video/map/normal/_'}]];
					terrabisApp.mapStaticImageURI = [[@{'/video/map/static/snapshot'}]];
					
					
					
					
					
					//GOOGLE PLACE SEARCH TODO REPLACE BY A COMMON TOOL
					terrabisApp.mapLocationSearchURI = [[@{'/rest/map-location/search/'}]];
					
					
					
				/**********************************AUTHENTICATION*************************************/	 
			    $("#loginbtn").click(ajaxlogin);
			
			    function ajaxlogin() {

			        $.ajax({
			            type: 'POST',
			            url: '/login',
			            data: $('#loginform').serialize(),
			            cache: false,
			            dataType: "json",
			            crossDomain: false,
			            success: function (data) {
			            	window.location.href = [[@{'/video/map/normal/_'}]]; 
			            }, 
			            error: function (data) {
			            	
			            	$("#loginformerror").switchClass("hidden", "-", 0, "easeInOutQuad" );
			            }
			        });
			    }
			
			});
			/*]]>*/
		</script>          



<!-- GOOGLE ANALYTICS -->
<!-- <script th:inline="javascript">
/*<![CDATA[*/
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-70448643-1', 'auto');
  ga('send', 'pageview',[[${#httpServletRequest.requestURI}]]);
  
/*]]>*/
</script>   -->        
 <!-- ga('send', 'pageview',[[${execInfo.templateName}]]); -->


<!-- REGISTER FORM VALIDATION -->	
<script th:inline="javascript">
/*<![CDATA[*/

           
           
           
           
           
      $(document).ready(function() {

    	  var registerFormValidation = $('#registerform').formValidation({
     	        framework: 'bootstrap',
     	        icon: {
     	            valid: 'fa  fa-check',
     	            invalid: 'fa fa-check fa-remove',
     	            validating: 'fa fa-refresh'
     	        },
     	        fields: {
     	            username: {
     	                validators: {
     	                    notEmpty: {
     	                        message: 'A nickname is required'
     	                    },
     	                    remote: {
     	                        message: 'The nickname is not available',
     	                        data: function(validator, $field, value) {
     	                            return {
     	                                username: validator.getFieldElements('username').val()
     	                            };
     	                        },
     	                        url: '/rest-validation/registration/duplicate/username',
     	                        type:  [[${_csrf.token}]]
     	                    }
     	                }
     	            },
     	           agreewithterms: {
     	                validators: {
     	                    notEmpty: {
     	                        message: 'You have to agree with the terms'
     	                    }
     	                }
     	            },
     	            email: {
     	                validators: {
     	                    notEmpty: {
     	                        message: 'An active email address is needed'
     	                    },
     	                    regexp: {
     	                        message: 'The value is not a valid email address',
     	                    	regexp: '^[^@\\s]+@([^@\\s]+\\.)+[^@\\s]+$'
     	                    },
     	                    remote: {
     	                        message: 'This email is already registered',
     	                        data: function(validator, $field, value) {
     	                            return {
     	                                username: validator.getFieldElements('email').val()
     	                            };
     	                        },
     	                        url: '/rest-validation/registration/duplicate/email',
     	                        type:  [[${_csrf.token}]]
     	                    }     	                    
     	                }
     	            },
     	            "password": {
     	                validators: {
     	                    notEmpty: {
     	                        message: 'You must enter a password'
     	                    },
       	                  identical: {
     	                      field: 'passwordConfirm',
     	                      message: 'The password and its confirm are not the same'
     	                  }     	                    
     	                }
     	            },
     	            "passwordConfirm": {
     	                validators: {
     	                    notEmpty: {
     	                        message: 'Please confirm the password '
     	                    },
       	                  identical: {
     	                      field: 'password',
     	                      message: 'The password and its confirm are not the same'
     	                  }     	                    
     	                }
     	            }
     	        }
     	    });	
     		

    	  
      });

    	/*]]>*/
</script> 



<script th:inline="javascript">
/*<![CDATA[*/

	
/******************************************* REST AJAX **********************************************************/
function restajax(variableURI,formData,functionCallBack) {
	
						$.ajax({ 
		        		    url:  variableURI, 
		        		    type: 'POST', 
		        		    dataType: 'json',
		        		    contentType: "application/json; charset=utf-8",
		        		    cache: false, // Force requested pages not to be cached by the browser
		        		    processData: false, // Avoid making query string instead of JSON		        		    
		        		    data: JSON.stringify(formData),
		        		    beforeSend: function (request)
    						{
        						request.setRequestHeader("X-CSRF-TOKEN", [[${_csrf.token}]]);
    						},
    						complete: functionCallBack,
		        		    error: function (xhr, status, error) {
		        		        console.log("restajax:ERROR:"+JSON.stringify(xhr));
		        		        console.log("restajax:ERROR:"+JSON.stringify(error));
		        		    }
		        		}); 
		        		
		        		
};




    	/*]]>*/
</script> 
	

	
	
	
<script src="../static/js/form-validation.js" th:inline="javascript" th:src="@{/js/form-validation.js}"></script>  
	
	
	           

</div>
   
   
 

